---
import { getEditeurs, getSectionPath, SectionId } from "../../content";
const { currentEditeurId, limit } = Astro.props;
import { capitalizeFirstLetter } from "../../content";
import { getEditeurCatalogLink } from "../../content";
import SidebarBlock from "../SidebarBlock.astro";
import T from "../T.astro";
import LinkItem from "../../components/LinkItem.astro";

const editeurs = getEditeurs();

const showMore = limit && limit <= editeurs.length;
---

<SidebarBlock k="catalogue.editeurs">
	<ul class="items-list">
		{
			editeurs.map((editeur) => {
				const { id, titre, count } = editeur;
				const isCurrent = id === currentEditeurId;
				return (
					<li class={isCurrent ? "editeur-current" : ""}>
						<LinkItem path={getEditeurCatalogLink(editeur)}>
							<span>
								{titre}
								<span class="count">({count})</span>
							</span>
						</LinkItem>
					</li>
				);
			})
		}
		{
			showMore && (
				<li>
					<LinkItem path={getSectionPath(SectionId.CATALOGUE)}>
						<T k="voir_plus" />
					</LinkItem>
				</li>
			)
		}
	</ul>
</SidebarBlock>

<style lang="scss" type="text/scss">
	.editeur-current {
		a {
			font-weight: bold;
		}
	}
	.count {
		font-weight: normal;
	}
	p {
		margin-bottom: 0;
	}
</style>
