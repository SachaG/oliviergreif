---
import { fade, slide } from "astro:transitions";
import T from "../T.astro";
import {
	getSectionPath,
	customTransition,
	getSectionComponent,
} from "../../content";
const { sectionId, color, inverted } = Astro.props;

const SectionComponent = getSectionComponent(sectionId);
---

<section
	class={`home-section home-section-active section-${sectionId} section-${inverted ? "inverted" : "normal"}`}
	style={`view-transition-name: section-${sectionId}`}
>
	<div class="bg"></div>
	<div class="inner">
		<h2
			class="section-heading"
			style={`view-transition-name: heading-${sectionId}`}
		>
			<a
				class="section-link link-heading"
				href={getSectionPath(sectionId)}
			>
				<T k={sectionId} />
			</a>
		</h2>
		{SectionComponent ? <SectionComponent /> : null}
	</div>
</section>

<style is:global define:vars={{ sectionId, color, inverted }}>
	.home-section {
		view-transition-name: var(--sectionId);
		grid-area: var(--sectionId);
		background-color: var(--color);
		background-color: var(--bgColor);

		padding: var(--spacing);
		/* border: 2px solid var(--borderColor); */
		position: relative;
		background: var(--bgColor);

		.bg {
			pointer-events: none;
			background: url("/images/ogreif-large.jpg") fixed;
			background-size: cover;
			filter: saturate(0.3) opacity(0.2);
			position: absolute;
			top: 0;
			left: 0;
			bottom: 0;
			right: 0;
			/* transition: all 600ms ease-in; */
		}
		.inner {
			display: grid;
			grid-template-rows: min-content 1fr;
			height: 100%;
		}
		&.home-section-active:hover {
			background: var(--bgColorSecondary);
		}

		/* a,
		a:link,
		a:visited {
			color: var(--textColor);
		} */
		section {
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			gap: var(--spacing);
		}
	}
	.section-heading {
		a {
			text-transform: uppercase;
			font-size: 1rem;
			margin-bottom: var(--spacing);
			border-bottom: var(--border);
			padding-bottom: var(--halfSpacing);
			text-decoration: none;
			&:hover {
				border-color: var(--linkHoverColor);
			}
			&::after {
				top: 40%;
			}
		}
	}
	.section-inverted {
		a {
			color: var(--invertedTextColor);
		}
		&:hover a {
			color: var(--invertedHoverTextColor);
		}
	}
	.home-section-link {
		font-size: 0.9rem;
	}
</style>
