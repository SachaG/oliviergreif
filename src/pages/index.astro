---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import HomeBlock from "../components/HomeBlock.astro";
import { getSectionPath, getSection } from "../helpers";
import ConcertComponent from "../components/concerts/Concert.astro";
import type { ConcertWithId } from "../types";
const concertsSection = getSection<ConcertWithId>("concerts");
const { items: concerts } = concertsSection;
---

<Layout>
	<h1>Olivier Greif</h1>
	<section class="first">
		<!-- <HomeBlock sectionId="concerts" /> -->
		<section>
			<h3>Concerts À Venir</h3>
			{
				concerts
					.filter((concert) => concert.date >= new Date())
					.map((concert) => (
						<ConcertComponent id={concert.id} variant="short" />
					))
			}
			<h3>Concerts Passés</h3>
			{
				concerts
					.filter((concert) => concert.date < new Date())
					.slice(0, 3)
					.map((concert) => (
						<ConcertComponent id={concert.id} variant="short" />
					))
			}
			<a href={getSectionPath(concertsSection)}>Voir tous les concerts</a>
		</section>
		<HomeBlock sectionId="actualites" limit={2} />
	</section>

	<!-- <section class="second">
		<HomeBlock sectionId="catalogue" />
		<HomeBlock sectionId="editeurs" />
		<HomeBlock sectionId="disques" />
	</section> -->
</Layout>

<style>
	html {
		--spacing: 80px;
	}
	.first {
		display: grid;
		gap: var(--spacing);
		grid-template-columns: 1fr 1fr;
		margin-bottom: var(--spacing);
	}
	.second {
		display: grid;
		gap: var(--spacing);
		grid-template-columns: 1fr 1fr 1fr;
	}
</style>
