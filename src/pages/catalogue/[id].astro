---
import type {
	InferGetStaticParamsType,
	InferGetStaticPropsType,
	GetStaticPaths,
} from "astro";

import Oeuvre from "../../components/catalogue/oeuvre/Oeuvre.astro";
import { getCatalogue, getOeuvre, getOeuvreBySlug } from "../../content";
import Layout from "../../layouts/Layout.astro";
import { getItemIdFromSlug, getItemsStaticPaths } from "../../helpers";

export const getStaticPaths = (async () => {
	const catalogue = await getCatalogue();
	return getItemsStaticPaths(catalogue);
}) satisfies GetStaticPaths;

type Params = InferGetStaticParamsType<typeof getStaticPaths>;

const { id: slug } = Astro.params as Params;
const oeuvre = getOeuvreBySlug(slug)!;
const { titre, id } = oeuvre;
---

<Layout title={titre}>
	<Oeuvre id={id} />
</Layout>
